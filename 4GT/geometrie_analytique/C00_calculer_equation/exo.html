<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Let's go Math !</title>

<!-- CSS -->
<link rel="stylesheet" href="../../../style.css">
<link rel="stylesheet" href="../../../exercices.css">

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- MathJax v3 -->
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body>

<nav class="lgm-navbar">
  <ul class="nav-liste">
    <li><a href="../../../index.html">Accueil</a></li>
    <li><a href="../../../index.html#dia2">4GT</a></li>
    <li><a href="../../../index.html#dia3">5GT 6h</a></li>
    <li><a href="../../../index.html#dia4">6GT 6h</a></li>
  </ul>
</nav>

<div class="exo-container">
  <h1>Exercice</h1>

<div class="equation-box" id="equation"></div>

  <input type="text" id="reponse" placeholder="...">

  <button onclick="verifier()">Vérifier</button>
  <button onclick="corriger()">Résolution</button>
  <button onclick="generer()">Nouvel exercice</button>

  <p id="feedback" class="feedback"></p>

  <div class="exo-links">
    <a href="../../4GT_geo_analytique.html">Retour au menu</a>
  </div>
</div>


  
<script>
  /*==============VARIABLES========*/
let m, e, f, p;
let cas;
  /*==============FONCTIONS========*/

  function normaliser(str) {
  return str
    .replace(/\s+/g, "")
    .replace(",", ".")
    .toLowerCase();
}

  /*==============GENERATION========*/
function generer() {

  document.getElementById("feedback").innerHTML = "";
  document.getElementById("reponse").value = "";


  const r = Math.random() * 100;

  // Point A
  e = Math.floor(Math.random() * 7) - 3;
  f = Math.floor(Math.random() * 7) - 3;

  let enonce = "";

  /* ===== CAS 1 : parallèle à l’axe des x (10%) ===== */
  
  if (r < 10) {
    
    cas = 1;

    p = f;
    m = 0;

    enonce = `Calcule l'équation réduite de la droite \\(d_1\\) passant par le point
    \\(A(${e};${f})\\) et parallèle à l’axe des abscisses.`;

  }

  /* ===== CAS 2 : parallèle à l’axe des y (10%) ===== */
  else if (r < 20) {

    cas = 2;

    enonce = `Calcule l'équation de la droite \\(d_1\\) passant par le point
    \\(A(${e};${f})\\) et parallèle à l’axe des ordonnées.`;

    // Cas particulier : x = e
    m = null;
    p = null;
  }

  /* ===== CAS 3 : passant par A et B (30%) ===== */
  else if (r < 50) {

    cas = 3;

    let xB, yB;
    do {
      xB = Math.floor(Math.random() * 7) - 3;
      yB = Math.floor(Math.random() * 7) - 3;
    } while (xB === e);

    m = (yB - f) / (xB - e);
    p = f - m * e;

    enonce = `Calcule l'équation réduite de la droite \\(d_1\\) passant par les points
    \\(A(${e};${f})\\) et \\(B(${xB};${yB})\\).`;
  }

  /* ===== CAS 4 : parallèle à d2 (25%) ===== */
  else if (r < 75) {

    cas = 4;

    let a = Math.floor(Math.random() * 5) + 1;
    let b = Math.floor(Math.random() * 5) + 1;
    let c = Math.floor(Math.random() * 7) - 3;

    m = -a / b;
    p = f - m * e;

    enonce = `Calcule l'équation réduite de la droite \\(d_1\\) passant par le point
    \\(A(${e};${f})\\) et parallèle à la droite
    \\(d_2 : ${a}x + ${b}y + ${c} = 0\\).`;
  }

  /* ===== CAS 5 : perpendiculaire à d2 (25%) ===== */
  else {

    cas = 5;

    let a = Math.floor(Math.random() * 5) + 1;
    let b = Math.floor(Math.random() * 5) + 1;
    let c = Math.floor(Math.random() * 7) - 3;

    m = b / a;
    p = f - m * e;

    enonce = `Calcule l'équation réduite de la droite \\(d_1\\) passant par le point
    \\(A(${e};${f})\\) et perpendiculaire à la droite
    \\(d_2 : ${a}x + ${b}y + ${c} = 0\\).`;
  }


  document.getElementById("equation").innerHTML = enonce;
  MathJax.typeset();
}



 /*==============VERFICATION========*/

function verifier() {

  const rep = normaliser(document.getElementById("reponse").value);

  /* ===== CAS 2 : droite verticale ===== */
  if (cas === 2) {

    const attendu = `x=${e}`;

    if (rep === normaliser(attendu)) {
      document.getElementById("feedback").innerHTML =
        "<span class='bon'>✅ Bonne réponse !</span>";
    } else {
      document.getElementById("feedback").innerHTML =
        "<span class='faux'>❌ Réponse incorrecte (forme attendue : x = …)</span>";
    }

    return;
  }

  /* ===== AUTRES CAS : y = mx + p ===== */
  let attendu = `y=${m}x`;

  if (p > 0) attendu += `+${p}`;
  if (p < 0) attendu += `${p}`;

  if (rep === normaliser(attendu)) {
    document.getElementById("feedback").innerHTML =
      "<span class='bon'>✅ Bonne réponse !</span>";
  } else {
    document.getElementById("feedback").innerHTML =
      "<span class='faux'>❌ Réponse incorrecte</span>";
  }
}


  /*==============RESOLUTION========*/


  
function corriger() {

  let texte = "";

     texte = `
  <span style='color: var(--peps); font-weight: bold;'> Étape 1 : </span>  <span style='color: var(--peps)'> on cherche \\( m \\)  </span> <br>
    `;
  
  /* ===== CAS 2 : droite verticale ===== */
  if (cas === 2) {

    texte = `
    <p><strong>La droite est parallèle à l’axe des ordonnées.</strong></p>

    <p>Une droite parallèle à l’axe des ordonnées a une équation de la forme :</p>

    \\[
    x = k
    \\]

    <p>Comme la droite passe par le point \\(A(${e};${f})\\), on a :</p>

    \\[
    x = ${e}
    \\]
    `;
  }

  /* ===== AUTRES CAS ===== */
  else {

    texte = `
    <p><strong>On cherche une équation de la forme :</strong></p>

    \\[
    y = mx + p
    \\]

    <p>La droite passe par le point \\(A(${e};${f})\\).</p>

    <p>On remplace les coordonnées du point dans l’équation :</p>

    \\[
    ${f} = ${m} \\cdot ${e} + p
    \\]

    <p>On calcule :</p>

    \\[
    p = ${f} - ${m * e} = ${p}
    \\]

    <p><strong>Équation de la droite :</strong></p>

    \\[
    y = ${m}x ${p > 0 ? "+" + p : p < 0 ? p : ""}
    \\]
    `;
  }

  document.getElementById("solution").innerHTML = texte;
  MathJax.typeset();
}


generer();
</script>

     
  <!-- Protection clique droit (commun à tout le site) -->
  <script src="../../../js/protection.js"></script>
  
</body>
</html>
