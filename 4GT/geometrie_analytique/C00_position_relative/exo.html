<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Let's go Math !</title>

<link rel="stylesheet" href="../../../style.css">
<link rel="stylesheet" href="../../../exercices.css">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body>

<nav class="lgm-navbar">
  <ul class="nav-liste">
    <li><a href="../../../index.html">Accueil</a></li>
    <li><a href="../../../index.html#dia2">4GT</a></li>
    <li><a href="../../../index.html#dia3">5GT 6h</a></li>
    <li><a href="../../../index.html#dia4">6GT 6h</a></li>
  </ul>
</nav>

<div class="exo-container">
  <h1>Exercice</h1>

  <div class="equation-box" id="enonce"></div>

  <!-- QCM -->
  <div id="qcm" class="qcm-grid">
    <div class="qcm-card" onclick="verifier('confondue',this)">Parall√®les confondues</div>
    <div class="qcm-card" onclick="verifier('paralleles',this)">Parall√®les distinctes</div>
    <div class="qcm-card" onclick="verifier('perpendiculaires',this)">Perpendiculaires</div>
    <div class="qcm-card" onclick="verifier('secantes',this)">S√©cantes non perpendiculaires</div>
  </div>

  <div class="center-button">
    <button onclick="generer()">Nouvel exercice</button>
  </div>

  <p id="feedback" class="feedback"></p>

  <div class="exo-links">
    <a href="../../4GT_geo_analytique.html">Retour au menu</a>
  </div>
</div>

<script>
/* ====================== MATHJAX ====================== */
function renderMath(el){
  MathJax.typesetClear([el]);
  MathJax.typesetPromise([el]);
}

/* ====================== OUTILS ====================== */
function rand(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }
function nonZero(){ let x; do{x=rand(-6,6);}while(x===0); return x; }

/* ====================== VARIABLES ====================== */
let m1,p1,m2,p2;
let bonneReponse="";
let explication="";
  
/* ====================== FONCTIONS ====================== */

  function randCoeffNZ10(){
  let x;
  do{
    x = Math.floor(Math.random()*21) - 10;
  } while(x === 0);
  return x;
}

  /* ====================== GENERER EQUATION ====================== */

let a,b,c,m,p;
let eq1Texte="", eq2Texte="";

function genererEquation(){

  // ===== Remise √† z√©ro =====
  document.getElementById("feedback").innerHTML = "";
  document.querySelectorAll('.qcm-card').forEach(card=>{
    card.classList.remove('correct','incorrect');
    card.style.pointerEvents = "auto";
  });

  /* ===== DROITE d1 : ax + by + c = 0 ===== */
  a = randCoeffNZ10();
  b = randCoeffNZ10();
  c = randCoeffNZ10();

  eq1Texte = `${a}x ${b>0?'+':''} ${b}y ${c>0?'+':''} ${c} = 0`
    .replace(/\+\s-/g,'- ');

  /* ===== DROITE d2 : y = mx + p ===== */
  m = randCoeffNZ10();
  p = randCoeffNZ10();

  eq2Texte = `y = ${m}x ${p>0?'+':''} ${p}`
    .replace(/\+\s-/g,'- ');

  /* ===== AFFICHAGE ===== */
  const eqDiv = document.getElementById("equation");
  eqDiv.innerHTML = `
    La droite \\(d_1\\) a pour √©quation :<br>
    \\[ ${eq1Texte} \\]<br>
    La droite \\(d_2\\) a pour √©quation :<br>
    \\[ ${eq2Texte} \\]<br>
    D√©termine la position relative de ces deux droites.
  `;
  renderMath(eqDiv);

  /* ===== Pr√©paration correction ===== */
  calculerBonneReponse();
}

  /* ====================== CALCUL ====================== */

  let m1, p1, bonneReponse, explication;

function calculerBonneReponse(){

  // pente et ordonn√©e √† l'origine de d1
  m1 = -a / b;
  p1 = -c / b;

  // pente et ordonn√©e de d2
  const m2 = m;
  const p2 = p;

  if (m1 === m2 && p1 === p2) {
    bonneReponse = "confondue";
    explication = "Les deux droites ont la m√™me pente et la m√™me ordonn√©e √† l‚Äôorigine.";
  }
  else if (m1 === m2) {
    bonneReponse = "paralleles";
    explication = "Les pentes sont √©gales mais les ordonn√©es √† l‚Äôorigine sont diff√©rentes.";
  }
  else if (m1 * m2 === -1) {
    bonneReponse = "perpendiculaires";
    explication = "Les pentes sont oppos√©es inverses.";
  }
  else {
    bonneReponse = "secantes";
    explication = "Les pentes sont diff√©rentes et non oppos√©es inverses.";
  }
}

  /* ====================== CORRECTION DETAILLEE ====================== */

function corriger(){
  const f = document.getElementById("feedback");
  f.style.color = "#000";

  f.innerHTML = `
  üìò <strong>Correction d√©taill√©e</strong><br><br>

  <u>√âtape 1</u> : on r√©duit l‚Äô√©quation de \\(d_1\\)<br>
  \\(${eq1Texte}\\) <br>
  \\(\\Rightarrow y = -\\frac{${a}}{${b}}x - \\frac{${c}}{${b}}\\)<br><br>

  <u>√âtape 2</u> : on lit les pentes<br>
  \\(m_1 = -\\frac{${a}}{${b}}\\), \\(m_2 = ${m}\\)<br><br>

  <u>Conclusion</u> : ${explication}
  `;
  renderMath(f);
}

  
/* ====================== VERIFICATION ====================== */
function verifier(rep,el){
  document.querySelectorAll('.qcm-card').forEach(c=>c.style.pointerEvents="none");

  if(rep===bonneReponse){
    el.classList.add('correct');
  }else{
    el.classList.add('incorrect');
    document.querySelectorAll('.qcm-card').forEach(c=>{
      if(c.textContent.toLowerCase().includes(bonneReponse))
        c.classList.add('correct');
    });
  }


}

window.onload=generer;
</script>

<script src="../../../js/protection.js"></script>
</body>
</html>
