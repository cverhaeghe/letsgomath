<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Titre dynamique : √† modifier sur chaque page -->
  <title>Let's go Math !</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Dancing+Script:wght@400..700&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- CSS principal -->
<link rel="stylesheet" href="../../../style.css">
<link rel="stylesheet" href="../../../exercices.css">


  <!-- Bootstrap (optionnel) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <!-- MathJax (OBLIGATOIRE pour les exos) -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>


  
<body>

  <!-- Navbar r√©utilisable -->
  <nav class="lgm-navbar">
    <ul class="nav-liste">
      <li><a href="../index.html">Accueil</a></li>
      <li><a href="../index.html#dia2">4GT</a></li>
      <li><a href="../index.html#dia3">5GT 6h</a></li>
      <li><a href="../index.html#dia4">6GT 6h</a></li>
    </ul>
  </nav>

  <!-- Contenu sp√©cifique √† chaque page -->



<div class="exo-container">

  <h1>Exercice</h1>

  <div class="equation-box" id="equation"></div>

  <input type="text" id="reponse" placeholder="">

<button onclick="verifier()">V√©rifier ma r√©ponse</button>
<button onclick="corriger()">Correction</button>
<button onclick="genererEquation()">Nouvel exercice</button>


  <p id="feedback" class="feedback"></p>

  <div class="exo-links">
    <a href="../../4GT_geo_analytique.html"> Retour au menu</a>
  </div>

</div>



<!-- ================= JAVASCRIPT ================= -->
<script>
let a, b, c;
let coeffA, coeffB;

// PGCD
function pgcd(x, y) {
  while (y !== 0) {
    let temp = y;
    y = x % y;
    x = temp;
  }
  return Math.abs(x);
}

// G√©n√©ration de l'√©quation
function genererEquation() {

  do {
    a = Math.floor(Math.random() * 21) - 10;
    b = Math.floor(Math.random() * 21) - 10;
  } while (a === 0 && b === 0);

  c = Math.floor(Math.random() * 21) - 10;

  let equationTexte = `${a}x + ${b}y + ${c} = 0`
    .replace("+ -", "- ")
    .replace("0x + ", "")
    .replace("1x", "x")
    .replace("+ 0y", "")
    .replace("1y", "y")
    .replace("0y + ", "")
    .replace("+ 0", "");

  document.getElementById("equation").innerHTML =
    `R√©duis l‚Äô√©quation de la droite : \\(${equationTexte}\\).`;

  document.getElementById("reponse").value = "";
  document.getElementById("feedback").innerHTML = "";

  // Cas g√©n√©ral : y = mx + p
  if (b !== 0) {
    let pgcd1 = pgcd(a, b);
    let pgcd2 = pgcd(c, b);

    coeffA = { num: -a / pgcd1, den: b / pgcd1 };
    coeffB = { num: -c / pgcd2, den: b / pgcd2 };
  }

  MathJax.typeset();
}

// Normalisation
function lireReponse() {
  return document.getElementById("reponse").value
    .toLowerCase()
    .replace(/\s/g, "");
}

// V√©rification
function verifier() {
  const r = lireReponse();
  const feedback = document.getElementById("feedback");

  // Cas vertical : ax + c = 0 ‚Üí x = -c/a
  if (b === 0) {
    let p = pgcd(c, a);
    let num = -c / p;
    let den = a / p;

    const formeSimplifiee = `x=${num}/${den}`;
    const formeNonSimplifiee = `x=${-c}/${a}`;

    if (r === formeSimplifiee) {
      feedback.innerHTML = "‚úÖ Correct !";
      feedback.style.color = "green";
    }
    else if (r === formeNonSimplifiee) {
      feedback.innerHTML = "üü† Presque‚Ä¶ fraction √† simplifier.";
      feedback.style.color = "orange";
    }
    else {
      feedback.innerHTML = "‚ùå Incorrect.";
      feedback.style.color = "red";
    }
    return;
  }

  // Cas horizontal : by + c = 0 ‚Üí y = -c/b
  if (a === 0) {
    let p = pgcd(c, b);
    let num = -c / p;
    let den = b / p;

    const formeSimplifiee = `y=${num}/${den}`;
    const formeNonSimplifiee = `y=${-c}/${b}`;

    if (r === formeSimplifiee) {
      feedback.innerHTML = "‚úÖ Correct !";
      feedback.style.color = "green";
    }
    else if (r === formeNonSimplifiee) {
      feedback.innerHTML = "üü† Presque‚Ä¶ fraction √† simplifier.";
      feedback.style.color = "orange";
    }
    else {
      feedback.innerHTML = "‚ùå Incorrect.";
      feedback.style.color = "red";
    }
    return;
  }

  // Cas g√©n√©ral
  const formeSimplifiee =
    `${coeffA.num}/${coeffA.den}x${coeffB.num < 0 ? "" : "+"}${coeffB.num}/${coeffB.den}`;

  const formeNonSimplifiee =
    `${-a}/${b}x${-c < 0 ? "" : "+"}${-c}/${b}`;

  if (r === formeSimplifiee) {
    feedback.innerHTML = "‚úÖ Correct !";
    feedback.style.color = "green";
  }
  else if (r === formeNonSimplifiee) {
    feedback.innerHTML = "üü† Presque‚Ä¶ Les fractions doivent √™tre simplifi√©es.";
    feedback.style.color = "orange";
  }
  else {
    feedback.innerHTML = "‚ùå Incorrect.";
    feedback.style.color = "red";
  }
}


// Correction
function corriger() {
  const feedback = document.getElementById("feedback");

  // Cas vertical
  if (b === 0) {
    let p = pgcd(c, a);
    let num = -c / p;
    let den = a / p;

    feedback.innerHTML =
      `üìò <strong>Correction</strong><br><br>
       \\(${a}x + ${c} = 0\\)<br><br>
       On isole x :<br>
       \\(x = -\\frac{${c}}{${a}}\\)<br><br>
       Fraction simplifi√©e :<br>
       \\(x = \\frac{${num}}{${den}}\\)`;

    MathJax.typeset();
    return;
  }

  // Cas horizontal
  if (a === 0) {
    let p = pgcd(c, b);
    let num = -c / p;
    let den = b / p;

    feedback.innerHTML =
      `üìò <strong>Correction</strong><br><br>
       \\(${b}y + ${c} = 0\\)<br><br>
       On isole y :<br>
       \\(y = -\\frac{${c}}{${b}}\\)<br><br>
       Fraction simplifi√©e :<br>
       \\(y = \\frac{${num}}{${den}}\\)`;

    MathJax.typeset();
    return;
  }

  // Cas b = 1 (pas de division inutile)
  if (b === 1) {
    feedback.innerHTML =
      `üìò <strong>Correction</strong><br><br>
       \\(${a}x + y + ${c} = 0\\)<br><br>
       On isole y :<br>
       \\(y = -${a}x - ${c}\\)`;

    MathJax.typeset();
    return;
  }

  // Cas g√©n√©ral
  feedback.innerHTML =
    `üìò <strong>Correction d√©taill√©e</strong><br><br>
     \\(${a}x + ${b}y + ${c} = 0\\)<br><br>
     \\(${b}y = -${a}x - ${c}\\)<br><br>
     \\(y = -\\frac{${a}}{${b}}x - \\frac{${c}}{${b}}\\)<br><br>
     \\(y = \\frac{${coeffA.num}}{${coeffA.den}}x + \\frac{${coeffB.num}}{${coeffB.den}}\\)`;

  MathJax.typeset();
}


// G√©n√©ration initiale
genererEquation();
</script>




</body>
</html>


